<!DOCTYPE html>
<html>
<head>
    <title>Test UI Selection Modes</title>
    <meta charset="utf-8">
    <style>
        body {
            font-family: monospace;
            padding: 20px;
            background: #0d1117;
            color: #c9d1d9;
        }
        .test-section {
            margin: 20px 0;
            padding: 15px;
            border: 1px solid #30363d;
            border-radius: 6px;
        }
        .test-result {
            padding: 10px;
            margin: 10px 0;
            border-radius: 4px;
        }
        .success { background: #0d2818; border: 1px solid #238636; }
        .error { background: #290e0e; border: 1px solid #8b2c2c; }
        .info { background: #161b22; border: 1px solid #30363d; }
        button {
            background: #238636;
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 6px;
            cursor: pointer;
            margin: 5px;
        }
        button:hover { background: #2ea043; }
    </style>
</head>
<body>
    <h1>üß™ Testing UI Selection Modes</h1>

    <div class="test-section">
        <h2>Test Instructions</h2>
        <p>1. Open the Analysis Control page at: <a href="http://192.168.178.72:8000/admin/analysis" target="_blank" style="color: #58a6ff;">http://192.168.178.72:8000/admin/analysis</a></p>
        <p>2. Click each button below and verify the behavior</p>
    </div>

    <div class="test-section">
        <h2>Test 1: Latest Articles Selection</h2>
        <button onclick="testLatestSelection()">Run Test</button>
        <div id="test1-result"></div>
        <div class="info">
            <strong>Expected behavior:</strong>
            <ul>
                <li>‚úÖ Click "Latest Articles" tab - should stay selected</li>
                <li>‚úÖ Enter value 50 in the input field</li>
                <li>‚úÖ Click "Apply Selection" - should NOT jump to another tab</li>
                <li>‚úÖ Preview should show "50 items" not "0 items"</li>
                <li>‚úÖ Active Selection should show "Latest 50 articles"</li>
            </ul>
        </div>
    </div>

    <div class="test-section">
        <h2>Test 2: Time Range Selection</h2>
        <button onclick="testTimeRangeSelection()">Run Test</button>
        <div id="test2-result"></div>
        <div class="info">
            <strong>Expected behavior:</strong>
            <ul>
                <li>‚úÖ Click "Time Range" tab - should stay selected</li>
                <li>‚úÖ Enter 7 days, 0 hours</li>
                <li>‚úÖ Click "Apply Selection" - should NOT jump to another tab</li>
                <li>‚úÖ Preview should show actual count (not 0)</li>
                <li>‚úÖ Active Selection should show "Articles from past 7 days"</li>
            </ul>
        </div>
    </div>

    <div class="test-section">
        <h2>Test 3: Unanalyzed Selection</h2>
        <button onclick="testUnanalyzedSelection()">Run Test</button>
        <div id="test3-result"></div>
        <div class="info">
            <strong>Expected behavior:</strong>
            <ul>
                <li>‚úÖ Click "Unanalyzed" tab - should stay selected</li>
                <li>‚úÖ Click "Apply Selection" - should NOT jump to another tab</li>
                <li>‚úÖ Preview should show count of unanalyzed items</li>
                <li>‚úÖ Active Selection should show "All unanalyzed articles"</li>
            </ul>
        </div>
    </div>

    <div class="test-section">
        <h2>Console Commands (for testing in browser console)</h2>
        <pre style="background: #161b22; padding: 15px; border-radius: 6px;">
// Get Alpine.js component
const app = document.querySelector('[x-data="analysisControl()"]')._x_dataStack[0];

// Test Latest Selection
app.selectionMode = 'latest';
app.latestCount = 50;
app.setLatestSelection();
console.log('Preview items:', app.preview.item_count);

// Test Time Range Selection
app.selectionMode = 'timeRange';
app.timeRangeDays = 7;
app.timeRangeHours = 0;
app.setTimeRangeSelection();
console.log('Preview items:', app.preview.item_count);

// Test Unanalyzed Selection
app.selectionMode = 'unanalyzed';
app.setUnanalyzedSelection();
console.log('Preview items:', app.preview.item_count);
        </pre>
    </div>

    <script>
        function testLatestSelection() {
            const result = document.getElementById('test1-result');
            result.className = 'test-result info';
            result.innerHTML = `
                <strong>Manual Test Steps:</strong><br>
                1. Click "üì∞ Latest Articles" button<br>
                2. Enter "50" in the input field<br>
                3. Click "‚úÖ Apply Selection"<br>
                4. Check that UI doesn't jump to Time Range<br>
                5. Check that Preview shows "50 items" not "0 items"
            `;
        }

        function testTimeRangeSelection() {
            const result = document.getElementById('test2-result');
            result.className = 'test-result info';
            result.innerHTML = `
                <strong>Manual Test Steps:</strong><br>
                1. Click "üïê Time Range" button<br>
                2. Enter "7" days and "0" hours<br>
                3. Click "‚úÖ Apply Selection"<br>
                4. Check that UI stays on Time Range tab<br>
                5. Check that Preview shows actual count (e.g., "200 items")
            `;
        }

        function testUnanalyzedSelection() {
            const result = document.getElementById('test3-result');
            result.className = 'test-result info';
            result.innerHTML = `
                <strong>Manual Test Steps:</strong><br>
                1. Click "üîç Unanalyzed" button<br>
                2. Click "‚úÖ Apply Selection"<br>
                3. Check that UI stays on Unanalyzed tab<br>
                4. Check that Preview shows count of unanalyzed items
            `;
        }
    </script>
</body>
</html>