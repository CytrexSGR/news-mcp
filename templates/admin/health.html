{% extends "base.html" %}

{% block title %}System Health - News MCP{% endblock %}

{% block content %}
<div class="d-flex justify-content-between align-items-center mb-4">
    <h1>System Health</h1>
    <button class="btn btn-success" hx-post="/api/feeds/refresh" hx-target="#health-overview">
        <i class="bi bi-arrow-clockwise"></i> Alle Feeds aktualisieren
    </button>
</div>

<div class="row mb-4">
    <div class="col-12">
        <div class="card">
            <div class="card-header">
                <h5>Ãœbersicht</h5>
            </div>
            <div class="card-body" id="health-overview" hx-get="/api/health/status" hx-trigger="load, every 60s">
                <div class="text-center">
                    <div class="spinner-border" role="status">
                        <span class="visually-hidden">Status wird geladen...</span>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="row mb-3">
    <div class="col-md-6">
        <input type="text" class="form-control" placeholder="Feeds durchsuchen..."
               hx-get="/api/health/feeds" hx-trigger="keyup changed delay:300ms" hx-target="#health-list">
    </div>
    <div class="col-md-3">
        <select class="form-select" hx-get="/api/health/feeds" hx-trigger="change" hx-target="#health-list">
            <option value="">Alle Status</option>
            <option value="healthy">Gesund</option>
            <option value="warning">Warnung</option>
            <option value="error">Fehler</option>
        </select>
    </div>
    <div class="col-md-3">
        <select class="form-select" hx-get="/api/health/feeds" hx-trigger="change" hx-target="#health-list">
            <option value="">Sortierung</option>
            <option value="uptime">Nach Uptime</option>
            <option value="response_time">Nach Antwortzeit</option>
            <option value="last_failure">Nach letztem Fehler</option>
        </select>
    </div>
</div>

<div id="health-list" hx-get="/api/health/feeds" hx-trigger="load">
    <div class="text-center">
        <div class="spinner-border" role="status">
            <span class="visually-hidden">Health-Daten werden geladen...</span>
        </div>
    </div>
</div>
{% endblock %}