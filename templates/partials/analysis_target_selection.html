<!-- Target Selection Component -->
<div class="target-selection-panel">
    <!-- Selection Mode Tabs -->
    <div class="btn-group w-100 mb-3" role="group">
        <button type="button"
                class="btn"
                :class="selectionMode === 'latest' ? 'btn-primary' : 'btn-outline-primary'"
                @click="selectionMode = 'latest'">
            üì∞ Latest Articles
        </button>
        <button type="button"
                class="btn"
                :class="selectionMode === 'timeRange' ? 'btn-primary' : 'btn-outline-primary'"
                @click="selectionMode = 'timeRange'">
            üïê Time Range
        </button>
        <button type="button"
                class="btn"
                :class="selectionMode === 'unanalyzed' ? 'btn-primary' : 'btn-outline-primary'"
                @click="selectionMode = 'unanalyzed'">
            üîç Unanalyzed
        </button>
    </div>

    <!-- Selection Options -->
    <div class="selection-options bg-dark p-3 rounded mb-3">
        <!-- Latest Articles Options -->
        <div x-show="selectionMode === 'latest'" class="selection-panel" x-cloak>
            <h6 class="text-white mb-3">üì∞ Select Latest Articles</h6>
            <div class="row align-items-end">
                <div class="col-md-8">
                    <label class="form-label text-white-50 small">Number of articles (1-1000)</label>
                    <input type="number"
                           class="form-control bg-secondary text-white border-secondary"
                           x-model.number="latestCount"
                           min="1"
                           max="1000"
                           placeholder="50"
                           @keyup.enter="setLatestSelection()">
                </div>
                <div class="col-md-4">
                    <button type="button"
                            class="btn btn-success w-100"
                            @click.prevent="setLatestSelection()">
                        ‚úÖ Apply Selection
                    </button>
                </div>
            </div>
            <small class="text-muted mt-2 d-block">Will select the N most recent articles</small>
        </div>

        <!-- Time Range Options -->
        <div x-show="selectionMode === 'timeRange'" class="selection-panel" x-cloak>
            <h6 class="text-white mb-3">üïê Select by Time Range</h6>
            <div class="row align-items-end">
                <div class="col-md-4">
                    <label class="form-label text-white-50 small">Days</label>
                    <input type="number"
                           class="form-control bg-secondary text-white border-secondary"
                           x-model.number="timeRangeDays"
                           min="0"
                           max="365"
                           placeholder="7">
                </div>
                <div class="col-md-4">
                    <label class="form-label text-white-50 small">Hours</label>
                    <input type="number"
                           class="form-control bg-secondary text-white border-secondary"
                           x-model.number="timeRangeHours"
                           min="0"
                           max="23"
                           placeholder="0">
                </div>
                <div class="col-md-4">
                    <button type="button"
                            class="btn btn-success w-100"
                            @click.prevent="setTimeRangeSelection()">
                        ‚úÖ Apply Selection
                    </button>
                </div>
            </div>
            <small class="text-muted mt-2 d-block">Will select articles from the specified time period</small>
        </div>

        <!-- Unanalyzed Options -->
        <div x-show="selectionMode === 'unanalyzed'" class="selection-panel" x-cloak>
            <h6 class="text-white mb-3">üîç Select All Unanalyzed</h6>
            <div class="alert alert-warning mb-3">
                <small>This will select ALL articles that haven't been analyzed yet. Use with caution for large datasets!</small>
            </div>
            <button type="button"
                    class="btn btn-success w-100"
                    @click.prevent="setUnanalyzedSelection()">
                ‚úÖ Apply Selection
            </button>
        </div>
    </div>

    <!-- Active Selection Display -->
    <div x-show="activeSelection.mode" class="active-selection-display">
        <div class="alert alert-success d-flex justify-content-between align-items-center">
            <div>
                <strong>‚úÖ Active Selection:</strong>
                <span x-text="activeSelection.description" class="ms-2"></span>
            </div>
            <button class="btn btn-sm btn-outline-danger" @click="clearSelection()">
                ‚ùå Clear
            </button>
        </div>
    </div>

    <!-- Additional Filters -->
    <div class="additional-filters bg-dark p-3 rounded">
        <h6 class="text-white mb-3">‚öôÔ∏è Additional Filters</h6>

        <div class="row">
            <!-- Feed Filter -->
            <div class="col-md-6 mb-3">
                <div class="form-check mb-2">
                    <input class="form-check-input"
                           type="checkbox"
                           id="useFeedFilter"
                           x-model="filters.useFeedFilter"
                           @change="updatePreview()">
                    <label class="form-check-label text-white" for="useFeedFilter">
                        Filter by specific feed
                    </label>
                </div>
                <select class="form-select bg-secondary text-white border-secondary"
                        x-model="filters.feed_id"
                        :disabled="!filters.useFeedFilter"
                        @change="updatePreview()">
                    <option value="">Select a feed...</option>
                    <option value="1">BBC News</option>
                    <option value="2">CNN</option>
                    <option value="3">Reuters</option>
                    <option value="4">The Guardian</option>
                    <option value="5">Associated Press</option>
                </select>
            </div>

            <!-- Override Existing -->
            <div class="col-md-6 mb-3">
                <div class="form-check">
                    <input class="form-check-input"
                           type="checkbox"
                           id="overrideExisting"
                           x-model="filters.override_existing"
                           @change="updatePreview()">
                    <label class="form-check-label text-white" for="overrideExisting">
                        Re-analyze already processed articles
                    </label>
                </div>
                <small class="text-muted d-block mt-2">
                    ‚ö†Ô∏è This will override existing analysis results
                </small>
            </div>
        </div>
    </div>
</div>

<style>
[x-cloak] { display: none !important; }

.target-selection-panel .selection-panel {
    animation: fadeIn 0.3s ease-in;
}

@keyframes fadeIn {
    from { opacity: 0; transform: translateY(-10px); }
    to { opacity: 1; transform: translateY(0); }
}

.active-selection-display .alert {
    background-color: rgba(25, 135, 84, 0.1);
    border-color: rgba(25, 135, 84, 0.3);
    color: #198754;
}

.selection-options {
    min-height: 150px;
    border: 1px solid rgba(255, 255, 255, 0.1);
}

.additional-filters {
    border: 1px solid rgba(255, 255, 255, 0.1);
}
</style>