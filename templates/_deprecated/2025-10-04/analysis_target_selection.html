<!-- Target Selection Component -->
<div class="target-selection-panel">
    <!-- Selection Mode Tabs -->
    <div class="btn-group w-100 mb-3" role="group">
        <button type="button"
                class="btn"
                :class="selectionMode === 'latest' ? 'btn-primary' : 'btn-outline-primary'"
                @click="selectionMode = 'latest'">
            📰 Latest Articles
        </button>
        <button type="button"
                class="btn"
                :class="selectionMode === 'timeRange' ? 'btn-primary' : 'btn-outline-primary'"
                @click="selectionMode = 'timeRange'">
            🕐 Time Range
        </button>
        <button type="button"
                class="btn"
                :class="selectionMode === 'unanalyzed' ? 'btn-primary' : 'btn-outline-primary'"
                @click="selectionMode = 'unanalyzed'">
            🔍 Unanalyzed
        </button>
    </div>

    <!-- Selection Options -->
    <div class="selection-options bg-dark p-3 rounded mb-3">
        <!-- Latest Articles Options -->
        <div x-show="selectionMode === 'latest'" class="selection-panel" x-cloak>
            <h6 class="text-white mb-3">📰 Select Latest Articles</h6>
            <div class="row align-items-end">
                <div class="col-md-8">
                    <label class="form-label text-white-50 small">Number of articles (1-1000)</label>
                    <input type="number"
                           class="form-control bg-secondary text-white border-secondary"
                           x-model.number="futureRun.selection.count"
                           min="1"
                           max="1000"
                           placeholder="50"
                           @keyup.enter="setLatestSelection()"
                           @change="setLatestSelection()">
                </div>
                <div class="col-md-4">
                    <button type="button"
                            class="btn btn-success w-100"
                            @click.prevent="setLatestSelection()">
                        ✅ Apply
                    </button>
                </div>
            </div>
            <small class="text-muted mt-2 d-block">Will select the N most recent articles</small>
        </div>

        <!-- Time Range Options -->
        <div x-show="selectionMode === 'timeRange'" class="selection-panel" x-cloak>
            <h6 class="text-white mb-3">🕐 Select by Time Range</h6>
            <div class="row align-items-end">
                <div class="col-md-4">
                    <label class="form-label text-white-50 small">Days</label>
                    <input type="number"
                           class="form-control bg-secondary text-white border-secondary"
                           x-model.number="timeRangeDays"
                           min="0"
                           max="365"
                           placeholder="7">
                </div>
                <div class="col-md-4">
                    <label class="form-label text-white-50 small">Hours</label>
                    <input type="number"
                           class="form-control bg-secondary text-white border-secondary"
                           x-model.number="timeRangeHours"
                           min="0"
                           max="23"
                           placeholder="0">
                </div>
                <div class="col-md-4">
                    <button type="button"
                            class="btn btn-success w-100"
                            @click.prevent="setTimeRangeSelection()">
                        ✅ Apply
                    </button>
                </div>
            </div>
            <small class="text-muted mt-2 d-block">Will select articles from the specified time period</small>
        </div>

        <!-- Unanalyzed Options -->
        <div x-show="selectionMode === 'unanalyzed'" class="selection-panel" x-cloak>
            <h6 class="text-white mb-3">🔍 Select All Unanalyzed</h6>
            <div class="alert alert-warning mb-3">
                <small>This will select ALL articles that haven't been analyzed yet. Use with caution for large datasets!</small>
            </div>
            <button type="button"
                    class="btn btn-success w-100"
                    @click.prevent="setUnanalyzedSelection()">
                ✅ Apply
            </button>
        </div>
    </div>

    <!-- Feed Filter Integration -->
    {% include 'partials/analysis_feed_filter.html' %}
</div>

<style>
[x-cloak] { display: none !important; }

.target-selection-panel .selection-panel {
    animation: fadeIn 0.3s ease-in;
}

@keyframes fadeIn {
    from { opacity: 0; transform: translateY(-10px); }
    to { opacity: 1; transform: translateY(0); }
}

.active-selection-display .alert {
    background-color: rgba(25, 135, 84, 0.1);
    border-color: rgba(25, 135, 84, 0.3);
    color: #198754;
}

.selection-options {
    min-height: 150px;
    border: 1px solid rgba(255, 255, 255, 0.1);
}

.additional-filters {
    border: 1px solid rgba(255, 255, 255, 0.1);
}
</style>